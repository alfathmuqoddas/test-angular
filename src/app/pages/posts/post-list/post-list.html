<div class="container mx-auto p-6">
  @if (postsReq.isLoading()) {
    <p>Loading...</p>
  }

  @if (postsReq.error()) {
    <div class="error-box">
      <p>Could not load post data.</p>
      <button (click)="postsReq.reload()">Retry</button>
    </div>
  }

  @if (postsReq.value(); as posts) {
    <h2 class="text-2xl font-bold mb-4 text-gray-800">All Posts</h2>

    <div class="overflow-x-auto shadow-md sm:rounded-lg">
      <table class="w-full text-sm text-left text-gray-500">
        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
          <tr>
            <th class="px-6 py-3">UserId</th>
            <th class="px-6 py-3">Title</th>
            <th class="px-6 py-3">Action</th>
          </tr>
        </thead>
        <tbody>
          @for (post of posts; track post.id) {
            <tr class="bg-white border-b hover:bg-gray-50 transition-colors">
              <td class="px-6 py-4 font-medium text-gray-900">{{ post.userId }}</td>
              <td class="px-6 py-4">{{ post.title }}</td>
              <td class="px-6 py-4">
                <a
                  [routerLink]="['/posts', post.id]"
                  class="font-medium text-blue-600 hover:underline"
                >
                  View Details
                </a>
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="4" class="px-6 py-10 text-center">no posts found...</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  } @else {
    <div class="flex flex-col items-center justify-center py-20">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-700 mb-4"></div>
      <p class="text-gray-600 animate-pulse">Fetching posts from server...</p>
    </div>
  }
</div>
